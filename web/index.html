<!doctype html>
<html>
<head>
    <!-- Recommended meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!-- PyScript CSS -->
    <link rel="stylesheet" href="https://pyscript.net/snapshots/2023.09.1.RC2/core.css">
    <!-- This script tag bootstraps PyScript -->
    <script type="module" src="https://pyscript.net/snapshots/2023.09.1.RC2/core.js"></script>
</head>
<body>

<!-- your code goes here... -->

<script>
    WebAssembly.instantiateStreaming(fetch('test.wasm'))
        .then(obj => {
                wasm_exports = {
                    fab: obj.instance.exports.fab,
                    fake_img: obj.instance.exports.fake_img,
                };

                console.log(obj)
            }
        );
</script>

<py-script>
    import sys
    from pyscript import display
    from js import wasm_exports

    display(sys.version)

    display(f"len: {wasm_exports.fake_img()}")

    for i in range(1, 20):
        display(f"fab {i} = {wasm_exports.fab(i)}")

</py-script>

</body>
</html>
